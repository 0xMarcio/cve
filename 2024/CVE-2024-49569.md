### [CVE-2024-49569](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-49569)
![](https://img.shields.io/static/v1?label=Product&message=Linux&color=blue)
![](https://img.shields.io/static/v1?label=Version&message=&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=5.12%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=7da81eaf8710130a9e63d7429627183be5a93787%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=958dc1d32c80566f58d18f05ef1f05bd32d172c1%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=a9ea34d2717a8c8892d3c5677329de9485e325ac%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=caed0b3851a4f52afd1ef77a27b30410fe7b68c7%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Vulnerability&message=n%2Fa&color=blue)

### Description

In the Linux kernel, the following vulnerability has been resolved:nvme-rdma: unquiesce admin_q before destroy itKernel will hang on destroy admin_q while we create ctrl failed, suchas following calltrace:PID: 23644    TASK: ff2d52b40f439fc0  CPU: 2    COMMAND: "nvme" #0 [ff61d23de260fb78] __schedule at ffffffff8323bc15 #1 [ff61d23de260fc08] schedule at ffffffff8323c014 #2 [ff61d23de260fc28] blk_mq_freeze_queue_wait at ffffffff82a3dba1 #3 [ff61d23de260fc78] blk_freeze_queue at ffffffff82a4113a #4 [ff61d23de260fc90] blk_cleanup_queue at ffffffff82a33006 #5 [ff61d23de260fcb0] nvme_rdma_destroy_admin_queue at ffffffffc12686ce #6 [ff61d23de260fcc8] nvme_rdma_setup_ctrl at ffffffffc1268ced #7 [ff61d23de260fd28] nvme_rdma_create_ctrl at ffffffffc126919b #8 [ff61d23de260fd68] nvmf_dev_write at ffffffffc024f362 #9 [ff61d23de260fe38] vfs_write at ffffffff827d5f25    RIP: 00007fda7891d574  RSP: 00007ffe2ef06958  RFLAGS: 00000202    RAX: ffffffffffffffda  RBX: 000055e8122a4d90  RCX: 00007fda7891d574    RDX: 000000000000012b  RSI: 000055e8122a4d90  RDI: 0000000000000004    RBP: 00007ffe2ef079c0   R8: 000000000000012b   R9: 000055e8122a4d90    R10: 0000000000000000  R11: 0000000000000202  R12: 0000000000000004    R13: 000055e8122923c0  R14: 000000000000012b  R15: 00007fda78a54500    ORIG_RAX: 0000000000000001  CS: 0033  SS: 002bThis due to we have quiesced admi_q before cancel requests, but forgotto unquiesce before destroy it, as a result we fail to drain thepending requests, and hang on blk_mq_freeze_queue_wait() forever. Heretry to reuse nvme_rdma_teardown_admin_queue() to fix this issue andsimplify the code.

### POC

#### Reference
No PoCs from references.

#### Github
- https://github.com/bygregonline/devsec-fastapi-report
- https://github.com/fkie-cad/nvd-json-data-feeds

