### [CVE-2024-38598](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-38598)
![](https://img.shields.io/static/v1?label=Product&message=Linux&color=blue)
![](https://img.shields.io/static/v1?label=Version&message=&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=152bb26796ff054af50b2ee1b3ca56e364e4f61b%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=301867b1c16805aebbc306aafa6ecdc68b73c7e5%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=374fb914304d9b500721007f3837ea8f1f9a2418%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=39fa14e824acfd470db4f42c354297456bd82b53%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=6.5%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=a134dd582c0d5b6068efa308bd485cf1d00b3f65%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=b0b971fe7d61411ede63c3291764dbde1577ef2c%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=be1a3ec63a840cc9e59a033acf154f56255699a1%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=bea301c046110bf421a3ce153fb868cb8d618e90%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Vulnerability&message=n%2Fa&color=blue)

### Description

In the Linux kernel, the following vulnerability has been resolved:md: fix resync softlockup when bitmap size is less than array sizeIs is reported that for dm-raid10, lvextend + lvchange --syncaction willtrigger following softlockup:kernel:watchdog: BUG: soft lockup - CPU#3 stuck for 26s! [mdX_resync:6976]CPU: 7 PID: 3588 Comm: mdX_resync Kdump: loaded Not tainted 6.9.0-rc4-next-20240419 #1RIP: 0010:_raw_spin_unlock_irq+0x13/0x30Call Trace: <TASK> md_bitmap_start_sync+0x6b/0xf0 raid10_sync_request+0x25c/0x1b40 [raid10] md_do_sync+0x64b/0x1020 md_thread+0xa7/0x170 kthread+0xcf/0x100 ret_from_fork+0x30/0x50 ret_from_fork_asm+0x1a/0x30And the detailed process is as follows:md_do_sync j = mddev->resync_min while (j < max_sectors)  sectors = raid10_sync_request(mddev, j, &skipped)   if (!md_bitmap_start_sync(..., &sync_blocks))    // md_bitmap_start_sync set sync_blocks to 0    return sync_blocks + sectors_skippe;  // sectors = 0;  j += sectors;  // j never changeRoot cause is that commit 301867b1c168 ("md/raid10: checkslab-out-of-bounds in md_bitmap_get_counter") return early frommd_bitmap_get_counter(), without setting returned blocks.Fix this problem by always set returned blocks frommd_bitmap_get_counter"(), as it used to be.Noted that this patch just fix the softlockup problem in kernel, thecase that bitmap size doesn't match array size still need to be fixed.

### POC

#### Reference
No PoCs from references.

#### Github
- https://github.com/ARPSyndicate/cve-scores

