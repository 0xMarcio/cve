### [CVE-2024-56780](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-56780)
![](https://img.shields.io/static/v1?label=Product&message=Linux&color=blue)
![](https://img.shields.io/static/v1?label=Version&message=&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=3027e200dd58d5b437f16634dbbd355b29ffe0a6%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=31bed65eecbc5ce57592cfe31947eaa64e3d678e%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=6.6%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=86d89987f0998c98f57d641e308b40452a994045%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=89602de9a2d7080b7a4029d5c1bf8f78d295ff5f%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=903fc5d8cb48b0d2de7095ef40e39fd32bb27bd0%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=d40c192e119892799dd4ddf94f5cea6fa93775ef%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=dabc8b20756601b9e1cc85a81d47d3f98ed4d13a%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=f3e9a2bbdeb8987508dd6bb2b701dea911d4daec%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Vulnerability&message=n%2Fa&color=blue)

### Description

In the Linux kernel, the following vulnerability has been resolved:quota: flush quota_release_work upon quota writebackOne of the paths quota writeback is called from is:freeze_super()  sync_filesystem()    ext4_sync_fs()      dquot_writeback_dquots()Since we currently don't always flush the quota_release_work queue inthis path, we can end up with the following race: 1. dquot are added to releasing_dquots list during regular operations. 2. FS Freeze starts, however, this does not flush the quota_release_work queue. 3. Freeze completes. 4. Kernel eventually tries to flush the workqueue while FS is frozen which    hits a WARN_ON since transaction gets started during frozen state:  ext4_journal_check_start+0x28/0x110 [ext4] (unreliable)  __ext4_journal_start_sb+0x64/0x1c0 [ext4]  ext4_release_dquot+0x90/0x1d0 [ext4]  quota_release_workfn+0x43c/0x4d0Which is the following line:  WARN_ON(sb->s_writers.frozen == SB_FREEZE_COMPLETE);Which ultimately results in generic/390 failing due to dmesgnoise. This was detected on powerpc machine 15 cores.To avoid this, make sure to flush the workqueue duringdquot_writeback_dquots() so we dont have any pending workitems afterfreeze.

### POC

#### Reference
No PoCs from references.

#### Github
- https://github.com/w4zu/Debian_security

