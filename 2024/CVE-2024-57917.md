### [CVE-2024-57917](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-57917)
![](https://img.shields.io/static/v1?label=Product&message=Linux&color=blue)
![](https://img.shields.io/static/v1?label=Version&message=&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=5.15%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=bb9ec13d156e85dfd6a8afd0bb61ccf5736ed257%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Vulnerability&message=n%2Fa&color=blue)

### Description

In the Linux kernel, the following vulnerability has been resolved:topology: Keep the cpumask unchanged when printing cpumapDuring fuzz testing, the following warning was discovered: different return values (15 and 11) from vsnprintf("%*pbl ", ...) test:keyward is WARNING in kvasprintf WARNING: CPU: 55 PID: 1168477 at lib/kasprintf.c:30 kvasprintf+0x121/0x130 Call Trace:  kvasprintf+0x121/0x130  kasprintf+0xa6/0xe0  bitmap_print_to_buf+0x89/0x100  core_siblings_list_read+0x7e/0xb0  kernfs_file_read_iter+0x15b/0x270  new_sync_read+0x153/0x260  vfs_read+0x215/0x290  ksys_read+0xb9/0x160  do_syscall_64+0x56/0x100  entry_SYSCALL_64_after_hwframe+0x78/0xe2The call trace shows that kvasprintf() reported this warning during theprinting of core_siblings_list. kvasprintf() has several steps: (1) First, calculate the length of the resulting formatted string. (2) Allocate a buffer based on the returned length. (3) Then, perform the actual string formatting. (4) Check whether the lengths of the formatted strings returned in     steps (1) and (2) are consistent.If the core_cpumask is modified between steps (1) and (3), the lengthsobtained in these two steps may not match. Indeed our test includes cpuhotplugging, which should modify core_cpumask while printing.To fix this issue, cache the cpumask into a temporary variable beforecalling cpumap_print_{list, cpumask}_to_buf(), to keep it unchangedduring the printing process.

### POC

#### Reference
No PoCs from references.

#### Github
- https://github.com/oogasawa/Utility-security
- https://github.com/w4zu/Debian_security

